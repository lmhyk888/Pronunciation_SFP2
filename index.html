<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <title>업로드 폼</title>
  <style>
    :root {
      --bg: #ffffff;
      --card: #ffffff;
      --muted: #6b7280;
      --text: #0f172a;
      --active: #f15a29; /* 브랜드 오렌지 */
      --ring: #f97316;
      --line: #e5e7eb;
      --chip: #f3f4f6;
      --shadow: 0 8px 30px rgba(15, 23, 42, 0.07);
      --radius: 18px;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica,
        Apple SD Gothic Neo, Noto Sans KR, sans-serif;
      color: var(--text);
      background: linear-gradient(180deg, #f8fafc, #fff 20%);
    }
    .wrap { max-width: 960px; margin: 0 auto; padding: 20px; }

    .card {
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    .p16 { padding: 16px; }
    .p20 { padding: 22px; }
    h1 { font-size: 24px; margin: 0; }
    .muted { color: var(--muted); font-size: 14px; }

    /* Buttons */
    .btn {
      appearance: none;
      border: 1px solid var(--line);
      background: #fff;
      color: var(--text);
      padding: 10px 16px;
      border-radius: 999px;
      cursor: pointer;
      font-size: 15px;
      line-height: 1;
      box-shadow: 0 1px 1px rgba(0, 0, 0, 0.03);
    }
    .btn:hover { transform: translateY(-1px); }
    .btn[aria-pressed="true"],
    .btn.primary {
      background: var(--active);
      border-color: var(--active);
      color: #fff;
      box-shadow: 0 6px 20px rgba(241, 90, 41, 0.25);
    }
    .btn:active { transform: translateY(0); }
    .btn:focus-visible {
      outline: 0;
      box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.35);
    }
    .iconbtn { padding: 8px 10px; border-radius: 12px; font-size: 13px; }

    /* Layout */
    .grid { display: grid; grid-template-columns: 1fr; gap: 12px; }
    @media (min-width: 720px) { .grid { grid-template-columns: repeat(2, 1fr); } }
    .section { margin-top: 16px; }
    .actions { display: flex; gap: 10px; margin-top: 14px; }
    .submit { background: var(--active); border: 0; color: white; }

    /* Inputs */
    .field {
      display: flex;
      align-items: center;
      background: #fff;
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 10px 12px;
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    .field:focus-within {
      border-color: var(--active);
      box-shadow: 0 0 0 3px rgba(241, 90, 41, 0.15);
    }
    .field label { min-width: 64px; color: var(--muted); font-size: 14px; }
    .field input {
      flex: 1;
      background: transparent;
      border: 0;
      outline: 0;
      color: var(--text);
      font-size: 16px;
    }

    /* List */
    .toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }
    .group { margin-top: 16px; }
    .group h3 { margin: 0 0 10px; font-size: 18px; color: #1f2937; }
    .item {
      display: flex;
      flex-direction: column;
      gap: 8px;
      background: #fff;
      border: 1px solid var(--line);
      border-radius: 16px;
      padding: 12px;
      margin-bottom: 10px;
      transition: transform 0.15s ease, box-shadow 0.15s ease, border-color 0.15s ease;
    }
    .item:hover { transform: translateY(-2px); box-shadow: 0 10px 24px rgba(15, 23, 42, 0.06); }
    .meta { display: flex; flex-wrap: wrap; gap: 6px; }
    .chip {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: var(--chip);
      border: 1px dashed var(--line);
      color: #374151;
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 12px;
    }

    /* Confirmed (오렌지 통일) */
    .item.confirmed { border-color: var(--active); box-shadow: 0 8px 20px rgba(241, 90, 41, 0.12); }
    .badge-confirm { background: #fff5f0; border: 1px solid var(--active); color: var(--active); }

    /* 별 버튼 */
    .confirm-btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: #fff;
      border: 1px solid var(--line);
      color: #374151;
      transition: all 0.2s ease;
    }
    .confirm-btn .star { font-size: 15px; color: #d1d5db; transition: color 0.2s ease, transform 0.2s ease; }
    .confirm-btn.on { background: #fff0ec; border-color: var(--active); color: var(--active); }
    .confirm-btn.on .star { color: var(--active); transform: scale(1.15) rotate(-10deg); }

    /* Collapsible */
    .card-header { display: flex; justify-content: space-between; align-items: center; gap: 10px; }
    .collapsible { overflow: hidden; transition: max-height 0.25s ease, opacity 0.2s ease; }
    .collapsible[hidden] { display: block; max-height: 0 !important; opacity: 0; }
    .is-collapsed .toggle-rotate { transform: rotate(180deg); transition: transform 0.2s ease; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card p20 sticky" id="formCard">
      <div class="card-header">
        <h1>항목 업로드</h1>
        <button id="toggleForm" class="btn" aria-expanded="true">
          <span id="toggleText">입력창 접기</span>
          <span class="toggle-rotate" aria-hidden="true">▾</span>
        </button>
      </div>
      <div class="hr" style="height:1px;background:var(--line);margin:16px 0"></div>

      <div id="formBody" class="collapsible">
        <div class="section">
          <div class="muted" style="margin-bottom:6px">담당자</div>
          <div class="btn-group" style="display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn person" data-value="김효주" aria-pressed="true">김효주</button>
            <button class="btn person" data-value="김영숙" aria-pressed="false">김영숙</button>
            <button class="btn person" data-value="권수경" aria-pressed="false">권수경</button>
          </div>
        </div>

        <div class="section">
          <div class="muted" style="margin-bottom:6px">성별</div>
          <div class="btn-group" style="display:flex;gap:8px;flex-wrap:wrap">
            <button class="btn gender" data-value="여" aria-pressed="true">여</button>
            <button class="btn gender" data-value="남" aria-pressed="false">남</button>
          </div>
        </div>

        <div class="section grid">
          <div class="field"><label>이름</label><input id="name" placeholder="예: 김철수" /></div>
          <div class="field"><label>나이</label><input id="age" type="number" placeholder="예: 28" /></div>
          <div class="field" style="grid-column:1/-1"><label>전화</label><input id="phone" placeholder="0000-0000-0000" /></div>
        </div>

        <div class="actions">
          <button id="submit" class="btn submit">등록</button>
          <button id="clear" class="btn">입력 초기화</button>
        </div>
      </div>
    </div>

    <div class="card p16" style="margin-top:12px">
      <div class="toolbar">
        <h2 style="margin:0;font-size:18px">목록</h2>
        <div class="btn-group" style="display:flex;gap:8px;flex-wrap:wrap">
          <button class="btn filter primary" data-filter="ALL">전체</button>
          <button class="btn filter" data-filter="김효주">김효주</button>
          <button class="btn filter" data-filter="김영숙">김영숙</button>
          <button class="btn filter" data-filter="권수경">권수경</button>
        </div>
      </div>
      <div id="list"></div>
    </div>
  </div>

  <script type="module">
    const STORAGE_KEY='entries.v1';const COLLAPSE_KEY='form.collapsed.v1';
    const $$=(s,c=document)=>Array.from(c.querySelectorAll(s));const $=(s,c=document)=>c.querySelector(s);
    const uid=()=>Date.now().toString(36)+Math.random().toString(36).slice(2,8);
    let state={person:'김효주',gender:'여',filter:'ALL'};
    function bindSingleSelect(sel,key){$$(sel).forEach(btn=>btn.addEventListener('click',()=>{$$(sel).forEach(b=>b.setAttribute('aria-pressed','false'));btn.setAttribute('aria-pressed','true');state[key]=btn.dataset.value;}));}
    bindSingleSelect('.person','person');bindSingleSelect('.gender','gender');
    $('#clear').addEventListener('click',()=>{$('#name').value='';$('#age').value='';$('#phone').value='';});
    function validate(){const n=$('#name').value.trim(),a=$('#age').value.trim(),p=$('#phone').value.trim();if(!n)return[false,'이름 입력'];return[true,{name:n,age:a?+a:null,phone:p}];}
    function saveLocal(d){const list=JSON.parse(localStorage.getItem(STORAGE_KEY)||'[]');const id=uid();list.push({id,...d,confirmed:false,createdAt:Date.now()});localStorage.setItem(STORAGE_KEY,JSON.stringify(list));}
    function updateLocal(id,p){const list=JSON.parse(localStorage.getItem(STORAGE_KEY)||'[]');const i=list.findIndex(x=>x.id===id);if(i>-1){list[i]={...list[i],...p};localStorage.setItem(STORAGE_KEY,JSON.stringify(list));}}
    function loadLocal(){return JSON.parse(localStorage.getItem(STORAGE_KEY)||'[]');}
    $('#submit').addEventListener('click',()=>{const[o,d]=validate();if(!o){alert(d);return;}saveLocal({person:state.person,gender:state.gender,...d});alert('등록 완료');$('#clear').click();render();});
    $$('.filter').forEach(b=>b.addEventListener('click',()=>{$$('.filter').forEach(x=>x.classList.remove('primary'));b.classList.add('primary');state.filter=b.dataset.filter;render();}));
    $('#list').addEventListener('click',e=>{const btn=e.target.closest('.confirm-btn');if(!btn)return;const id=btn.dataset.id;const c=btn.getAttribute('aria-pressed')==='true';updateLocal(id,{confirmed:!c});render();});
    function render(){const c=$('#list');let rows=loadLocal();rows.sort((a,b)=>a.name.localeCompare(b.name,'ko'));if(state.filter!=='ALL')rows=rows.filter(x=>x.person===state.filter);c.innerHTML=rows.length?rows.map(itemHTML).join(''):'<div class="muted">등록된 항목이 없습니다.</div>';}
    function itemHTML(r){const on=r.confirmed?'on':'';return`<div class="item ${r.confirmed?'confirmed':''}"><div style="display:flex;justify-content:space-between;align-items:center;"><div style="font-weight:600">${r.name}</div><button class="btn iconbtn confirm-btn ${on}" data-id="${r.id}" aria-pressed="${r.confirmed}"><span class="star">★</span> 확정</button></div><div class="meta"><span class="chip">성별: ${r.gender}</span>${r.age?`<span class="chip">나이: ${r.age}</span>`:''}<a class="chip" href="tel:${r.phone}">전화: ${r.phone}</a>${r.confirmed?`<span class="chip badge-confirm">면접 확정</span>`:''}</div></div>`;}
    const formBody=$('#formBody'),toggleBtn=$('#toggleForm'),toggleText=$('#toggleText'),formCard=$('#formCard');
    let collapsed=localStorage.getItem(COLLAPSE_KEY)==='1';applyCollapse(collapsed,false);
    toggleBtn.addEventListener('click',()=>{collapsed=!collapsed;applyCollapse(collapsed,true);localStorage.setItem(COLLAPSE_KEY,collapsed?'1':'0');});
    function applyCollapse(c,a){toggleBtn.setAttribute('aria-expanded',String(!c));toggleText.textContent=c?'입력창 펼치기':'입력창 접기';formCard.classList.toggle('is-collapsed',c);formBody.hidden=c;}
    render();
  </script>
</body>
</html>
